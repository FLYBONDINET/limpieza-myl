<?!= include("views/partials/head"); ?>
<body class="bg-gray">
  <div class="container">
    <header class="header">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/Flybondi_logo.svg/2560px-Flybondi_logo.svg.png" class="logo" alt="Flybondi">
      <h1>Limpiezas Pendientes – Etapa 2 (Jefe de Cabina)</h1>
    </header>

    <section class="card">
      <div class="filters">
        <label>Fecha <input type="text" id="filtroFecha" placeholder="dd-mm-aaaa" /></label>
        <label>Matrícula <input type="text" id="filtroMatricula" placeholder="LV-..." /></label>
        <button class="btn" onclick="buscar()">Buscar</button>
        <button class="btn ghost" onclick="limpiarFiltros()">Limpiar</button>
      </div>

      <div class="table-wrap">
        <table id="tabla">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Matrícula</th>
              <th>Tipo</th>
              <th>Pos.</th>
              <th>Vuelo</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Modal Detalle + Aceptación -->
    <div id="modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Detalle</h3>
          <button class="btn ghost" onclick="cerrarModal()">Cerrar</button>
        </div>
        <div class="modal-body">
          <div id="detalle" class="detalle"></div>
          <hr/>
          <h4>Recepción Jefe de Cabina</h4>
          <form id="form-2" onsubmit="return false;">
            <div class="grid">
              <label>Fecha
                <input type="date" id="recepcionFecha" />
              </label>
              <label>Hora (hh:mm)
                <div class="time-row">
                  <input type="time" id="recepcionHora" />
                  <button class="btn ghost" type="button" onclick="setNow('recepcionHora')">Ahora</button>
                </div>
              </label>
              <label>Nombre y apellido
                <input type="text" id="recepcionNombre" />
              </label>
              <label>Legajo
                <input type="text" id="recepcionLegajo" />
              </label>
              <label>Estado limpieza
                <select id="estadoCabina">
                  <option>Conforme</option>
                  <option>No conforme</option>
                </select>
              </label>
              <label class="col-span">Observaciones
                <textarea id="observacionesCabina" rows="3"></textarea>
              </label>
              <label class="col-span">Adjuntar archivos
                <input type="file" id="files2" multiple />
              </label>
              <div class="col-span">
                <p>Firma (táctil):</p>
                <canvas id="firmaCabina" width="600" height="150" class="sig"></canvas>
                <div class="sig-actions">
                  <button class="btn ghost" type="button" onclick="clearCanvas('firmaCabina')">Borrar</button>
                </div>
              </div>
            </div>
            <div class="actions">
              <button class="btn" id="enviarBtn2" onclick="enviarEtapa2()">Enviar aceptación</button>
            </div>
            <div id="msg2" class="msg"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <?!= include("views/partials/scripts"); ?>
  <script src="views/js/common.js"></script>
  <script src="views/js/supervisor.js"></script>
</body>
</html>
